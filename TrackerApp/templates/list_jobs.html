{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1 class="h3 mb-3 fw-normal">Maintain Jobs</h1>
    <table class="table table-hover table-sm">
    <thead>
        <tr>
            
          <th scope="col">Job Name </th>
          <th scope="col">Date</th>
          <th scope="col">Status</th>
          <th scope="col">Priority</th>
          <th scope="col">Note</th>
          <th scope="col">Tasks</th>
          <th scope="col">Task Status</th>
          <th scope="col">Maintain</th>
          
        </tr>
      </thead>
    <tbody>
{% for job in job_list %}
    <tr>
        <td>
          {{ job.name }}
        </td>
        <td> {{ job.job_date.strftime('%Y-%m-%d') }} </td>
        <td> {{ job.status }} </td>
        <td> {{ job.priority }} </td>
        <td> {{ job.note }} </td>
        <td> 
          {% for task in job_tasks %} 
            {% if task.job_id == job.id %}
              {{ task.Task.order }} - {{ task.Task.name}} <br>
            {% endif %}  
          {% endfor %}
        </td>
        <td>
          {% for task in job_tasks %} 
            {% if task.job_id == job.id %}
              {{ task.Task.status}} <br> 
            {% endif %}  
          {% endfor %}
        </td>
        <td>
          <a href="{{ url_for('jobs.update_job', job_id=job.id) }}">  Edit job </a>
          <br>
          <a href="{{ url_for('job_status.view_job_status', job_id=job.id) }}"> View status </a>
          <br>
          <a href="{{ url_for('tasks.create_task', job_id=job.id) }}">  Add task </a>
          <br>
          <a href="{{ url_for('tasks.list_tasks', job_id=job.id) }}"> Edit tasks </a>

        </td>
    </tr>
{% endfor %}
    </tbody>
    </table>
</div>
{% endblock content %}
